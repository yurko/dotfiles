alias dclogs="docker-compose logs --tail 1 -f"
alias drmi="docker rmi $(docker images --filter "dangling=true" -q --no-trunc)"

# Docker container socket address resolver
# jq shoul be installed
# sock container_name internal_port
sock() {
  ip=`docker inspect test_sshd | jq ".[0].NetworkSettings.IPAddress"`
  ip="${ip%\"}"
  ip="${ip#\"}"
  port=`docker port $1 $2` # returns 0.0.0.0:8342
  port=${port#0.0.0.0:}    # remove 0.0.0.0:
  echo "$ip:$port"
}

function dpsa() {
  docker ps -f "name=$1" -a
}

function dps() {
  docker ps -f "name=$1"
}

dcs() {
  echo '
    # remove docker containers
    docker ps -a
    docker rm $(docker ps -qa --no-trunc --filter "status=exited")

    # remove docker images
    docker rmi $(docker images --filter "dangling=true" -q --no-trunc)

    # delete volumes:
    docker volume rm $(docker volume ls -qf dangling=true)
  '
}

dcleanup(){
  docker rm -v $(docker ps --filter status=exited -q 2>/dev/null) 2>/dev/null
  docker rmi $(docker images --filter dangling=true -q 2>/dev/null) 2>/dev/null
}
